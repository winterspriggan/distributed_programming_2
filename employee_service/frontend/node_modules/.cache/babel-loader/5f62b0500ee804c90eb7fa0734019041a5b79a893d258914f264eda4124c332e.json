{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import'./ReviewClaim.css';import{ENDPOINT_GET_MANAGING_CLAIMS,ENDPOINT_POST_ANSWER_BOARD,ENDPOINT_POST_REPORT}from\"../../../../common/Endpoint/Endpoint\";import swal from\"sweetalert\";import Button from\"../../../../common/Button/Button\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ClaimRecord(_ref){let{claim,employee}=_ref;function reviewClaim(result){swal({content:\"input\"}).then(report=>{if(report===''){swal({title:'조사 보고서 제출 실패',text:'입력이 비어있습니다.',icon:'error',button:'확인'});}else{axios.post(ENDPOINT_POST_REPORT,null,{params:{id:claim.id,status:result}}).then(response=>{if(response.data===true){swal({title:'보상금 청구 심사 완료',text:'보상금 청구 심사가 완료되었습니다.',icon:'success',button:'확인'});}else{swal({title:'보상금 청구 심사 실패',text:'잠시후 다시 시도해주세요.',icon:'error',button:'확인'});}}).catch(error=>{swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});}});}return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:claim.id}),/*#__PURE__*/_jsx(\"td\",{children:claim.contract_id}),/*#__PURE__*/_jsx(\"td\",{children:claim.date}),/*#__PURE__*/_jsx(\"td\",{children:claim.description}),/*#__PURE__*/_jsx(\"td\",{children:claim.investigator}),/*#__PURE__*/_jsx(\"td\",{children:claim.reviewer}),/*#__PURE__*/_jsx(\"td\",{children:claim.report}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(Button,{text:'승인',onClick:e=>reviewClaim('ACCEPTED')}),/*#__PURE__*/_jsx(Button,{text:'거부',onClick:e=>reviewClaim('REJECTED')})]})]});}export default function ReviewClaim(_ref2){let{employee}=_ref2;const[claims,setClaims]=useState(null);function refreshClaims(){axios.get(ENDPOINT_GET_MANAGING_CLAIMS,{params:{id:employee.id}}).then(response=>{setClaims(response.data);}).catch(error=>{swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});}useEffect(()=>{refreshClaims();},[]);if(employee.department!==\"SUPPORTING\"){swal({title:'권한 없음',text:'보험지원팀만 이용 가능한 메뉴입니다.',icon:'error',button:'확인'});return null;}return/*#__PURE__*/_jsxs(\"div\",{className:'review_claim',children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uBCF4\\uC0C1\\uAE08 \\uCCAD\\uAD6C \\uC2EC\\uC0AC\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\uCCAD\\uAD6C \\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uACC4\\uC57D \\uC544\\uC774\\uB514\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0A0\\uC9DC\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uB0B4\\uC6A9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC870\\uC0AC \\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC2EC\\uC0AC \\uB2F4\\uB2F9\\uC790\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC870\\uC0AC\\uBCF4\\uACE0\\uC11C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\uC2EC\\uC0AC \\uBC84\\uD2BC\"})]}),claims!==null?claims.map(claim=>/*#__PURE__*/_jsx(ClaimRecord,{claim:claim,employee:employee})):\"LOADING...\"]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","ENDPOINT_GET_MANAGING_CLAIMS","ENDPOINT_POST_ANSWER_BOARD","ENDPOINT_POST_REPORT","swal","Button","jsx","_jsx","jsxs","_jsxs","ClaimRecord","_ref","claim","employee","reviewClaim","result","content","then","report","title","text","icon","button","post","params","id","status","response","data","catch","error","children","contract_id","date","description","investigator","reviewer","onClick","e","ReviewClaim","_ref2","claims","setClaims","refreshClaims","get","department","className","map"],"sources":["C:/Users/junse/Desktop/workspace/GitHub/ds2project/employee_service/frontend/src/user_defined_react_component/specific/Main/MainContents/ReviewClaim/ReviewClaim.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport './ReviewClaim.css'\r\nimport {\r\n    ENDPOINT_GET_MANAGING_CLAIMS,\r\n    ENDPOINT_POST_ANSWER_BOARD, ENDPOINT_POST_REPORT\r\n} from \"../../../../common/Endpoint/Endpoint\";\r\nimport swal from \"sweetalert\";\r\nimport Button from \"../../../../common/Button/Button\";\r\n\r\nfunction ClaimRecord({claim, employee}) {\r\n    function reviewClaim(result) {\r\n        swal({\r\n            content: \"input\",\r\n        }).then(report => {\r\n            if (report === '') {\r\n                swal({\r\n                    title: '조사 보고서 제출 실패',\r\n                    text: '입력이 비어있습니다.',\r\n                    icon: 'error',\r\n                    button: '확인',\r\n                });\r\n            } else {\r\n                axios.post(ENDPOINT_POST_REPORT, null, {\r\n                    params: {\r\n                        id: claim.id,\r\n                        status: result\r\n                    }\r\n                })\r\n                    .then(response => {\r\n                        if (response.data === true) {\r\n                            swal({\r\n                                title: '보상금 청구 심사 완료',\r\n                                text: '보상금 청구 심사가 완료되었습니다.',\r\n                                icon: 'success',\r\n                                button: '확인',\r\n                            });\r\n                        } else {\r\n                            swal({\r\n                                title: '보상금 청구 심사 실패',\r\n                                text: '잠시후 다시 시도해주세요.',\r\n                                icon: 'error',\r\n                                button: '확인',\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(error => {\r\n                        swal({\r\n                            title: '시스템 오류',\r\n                            text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',\r\n                            icon: 'error',\r\n                            button: '확인',\r\n                        });\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    return (\r\n        <tr>\r\n            <td>{claim.id}</td>\r\n            <td>{claim.contract_id}</td>\r\n            <td>{claim.date}</td>\r\n            <td>{claim.description}</td>\r\n            <td>{claim.investigator}</td>\r\n            <td>{claim.reviewer}</td>\r\n            <td>{claim.report}</td>\r\n            <td><Button text={'승인'} onClick={e => reviewClaim('ACCEPTED')}/>\r\n                <Button text={'거부'} onClick={e => reviewClaim('REJECTED')}/></td>\r\n        </tr>\r\n    );\r\n}\r\n\r\nexport default function ReviewClaim({employee}) {\r\n\r\n    const [claims, setClaims] = useState(null);\r\n\r\n    function refreshClaims() {\r\n        axios.get(ENDPOINT_GET_MANAGING_CLAIMS, {\r\n            params: {id: employee.id}\r\n        })\r\n            .then(response => {\r\n                setClaims(response.data);\r\n            })\r\n            .catch(error => {\r\n                swal({\r\n                    title: '시스템 오류',\r\n                    text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',\r\n                    icon: 'error',\r\n                    button: '확인',\r\n                });\r\n            });\r\n    }\r\n\r\n    useEffect(() => {\r\n        refreshClaims();\r\n    }, []);\r\n\r\n    if (employee.department !== \"SUPPORTING\") {\r\n        swal({\r\n            title: '권한 없음',\r\n            text: '보험지원팀만 이용 가능한 메뉴입니다.',\r\n            icon: 'error',\r\n            button: '확인',\r\n        });\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div className={'review_claim'}>\r\n            <h2>보상금 청구 심사</h2>\r\n            <table>\r\n                <tr>\r\n                    <th>청구 아이디</th>\r\n                    <th>계약 아이디</th>\r\n                    <th>날짜</th>\r\n                    <th>내용</th>\r\n                    <th>조사 담당자</th>\r\n                    <th>심사 담당자</th>\r\n                    <th>조사보고서</th>\r\n                    <th>심사 버튼</th>\r\n                </tr>\r\n                {claims !== null ? claims.map(claim => <ClaimRecord\r\n                        claim={claim} employee={employee}/>)\r\n                    : \"LOADING...\"\r\n                }\r\n            </table>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}