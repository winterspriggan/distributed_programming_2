{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{ENDPOINT_GET_PRODUCTS,ENDPOINT_POST_UNDERWRITE}from\"../../../../common/Endpoint/Endpoint\";import TextInput from\"../../../../common/TextInput/TextInput\";import Button from\"../../../../common/Button/Button\";import SelectInput from\"../../../../common/SelectInput/SelectInput\";import swal from\"sweetalert\";import'./Underwrite.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Underwrite(_ref){let{employee}=_ref;const[products,setProducts]=useState(null);const[selectedProduct,setSelectedProduct]=useState(null);const[seniorRate,setSeniorRate]=useState('');const[maleRate,setMaleRate]=useState('');const[femaleRate,setFemaleRate]=useState('');const[occupationalHazardRate,setOccupationalHazardRate]=useState('');const[smokingRate,setSmokingRate]=useState('');useEffect(()=>{axios.get(ENDPOINT_GET_PRODUCTS).then(response=>{setProducts(response.data);if(response.data.filter(p=>p.released===0).length===0)setSelectedProduct(null);else setSelectedProduct(response.data.filter(p=>p.released===0)[0].name);}).catch(error=>{console.log(error);swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});},[]);const handleSubmit=async e=>{var _products$find;e.preventDefault();await axios.post(ENDPOINT_POST_UNDERWRITE,null,{params:{id:(_products$find=products.find(p=>p.name===selectedProduct))===null||_products$find===void 0?void 0:_products$find.id,senior_rate:seniorRate,male_rate:maleRate,female_rate:femaleRate,occupational_hazard_rate:occupationalHazardRate,smoking_rate:smokingRate}}).then(response=>{if(response.data===false)swal({title:'요율 결정 실패',text:'입력을 다시 확인해주세요.',icon:'error',button:'확인'});else swal({title:'요율 결정 성공',text:'요율이 결정되어 상품이 공개 상태로 전환되었습니다.',icon:'success',button:'확인'});}).catch(error=>{swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});};if(employee.department!==\"UNDERWRITING\"){swal({title:'권한 없음',text:'언더라이팅팀만 이용 가능한 메뉴입니다.',icon:'error',button:'확인'});return null;}else if(products===null)return null;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:'underwrite',children:[/*#__PURE__*/_jsx(SelectInput,{text:'상품 이름',values:products.filter(p=>p.released===0).map(p=>p.name),onChange:e=>setSelectedProduct(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{text:'고령 요율',value:seniorRate,onChange:e=>setSeniorRate(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{text:'남성 요율',value:maleRate,onChange:e=>setMaleRate(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{text:'여성 요율',value:femaleRate,onChange:e=>setFemaleRate(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{text:'위험 직업 요율',value:occupationalHazardRate,onChange:e=>setOccupationalHazardRate(e.target.value)}),/*#__PURE__*/_jsx(TextInput,{text:'흡연 요율',value:smokingRate,onChange:e=>setSmokingRate(e.target.value)}),/*#__PURE__*/_jsx(Button,{text:'제출'})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","ENDPOINT_GET_PRODUCTS","ENDPOINT_POST_UNDERWRITE","TextInput","Button","SelectInput","swal","jsx","_jsx","jsxs","_jsxs","Underwrite","_ref","employee","products","setProducts","selectedProduct","setSelectedProduct","seniorRate","setSeniorRate","maleRate","setMaleRate","femaleRate","setFemaleRate","occupationalHazardRate","setOccupationalHazardRate","smokingRate","setSmokingRate","get","then","response","data","filter","p","released","length","name","catch","error","console","log","title","text","icon","button","handleSubmit","e","_products$find","preventDefault","post","params","id","find","senior_rate","male_rate","female_rate","occupational_hazard_rate","smoking_rate","department","onSubmit","className","children","values","map","onChange","target","value"],"sources":["C:/Users/junse/Desktop/workspace/GitHub/ds2project/employee_service/frontend/src/user_defined_react_component/specific/Main/MainContents/Underwrite/Underwrite.jsx"],"sourcesContent":["import React, {useEffect, useState} from \"react\";\r\nimport axios from \"axios\";\r\nimport {ENDPOINT_GET_PRODUCTS, ENDPOINT_POST_UNDERWRITE} from \"../../../../common/Endpoint/Endpoint\";\r\nimport TextInput from \"../../../../common/TextInput/TextInput\";\r\nimport Button from \"../../../../common/Button/Button\";\r\nimport SelectInput from \"../../../../common/SelectInput/SelectInput\";\r\nimport swal from \"sweetalert\";\r\nimport './Underwrite.css'\r\n\r\nexport default function Underwrite({employee}) {\r\n\r\n    const [products, setProducts] = useState(null);\r\n    const [selectedProduct, setSelectedProduct] = useState(null);\r\n    const [seniorRate, setSeniorRate] = useState('');\r\n    const [maleRate, setMaleRate] = useState('');\r\n    const [femaleRate, setFemaleRate] = useState('');\r\n    const [occupationalHazardRate, setOccupationalHazardRate] = useState('');\r\n    const [smokingRate, setSmokingRate] = useState('');\r\n\r\n    useEffect(() => {\r\n        axios.get(ENDPOINT_GET_PRODUCTS)\r\n            .then(response => {\r\n                setProducts(response.data);\r\n                if (response.data.filter(p => p.released === 0).length === 0) setSelectedProduct(null);\r\n                else setSelectedProduct(response.data.filter(p => p.released === 0)[0].name);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                swal({\r\n                    title: '시스템 오류',\r\n                    text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',\r\n                    icon: 'error',\r\n                    button: '확인',\r\n                });\r\n            });\r\n    }, []);\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        await axios.post(ENDPOINT_POST_UNDERWRITE, null, {\r\n            params: {\r\n                id: products.find(p => p.name === selectedProduct)?.id,\r\n                senior_rate: seniorRate,\r\n                male_rate: maleRate,\r\n                female_rate: femaleRate,\r\n                occupational_hazard_rate: occupationalHazardRate,\r\n                smoking_rate: smokingRate,\r\n            }\r\n        })\r\n            .then(response => {\r\n                if (response.data === false)\r\n                    swal({\r\n                        title: '요율 결정 실패',\r\n                        text: '입력을 다시 확인해주세요.',\r\n                        icon: 'error',\r\n                        button: '확인',\r\n                    });\r\n                else\r\n                    swal({\r\n                        title: '요율 결정 성공',\r\n                        text: '요율이 결정되어 상품이 공개 상태로 전환되었습니다.',\r\n                        icon: 'success',\r\n                        button: '확인',\r\n                    });\r\n            })\r\n            .catch(error => {\r\n                swal({\r\n                    title: '시스템 오류',\r\n                    text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',\r\n                    icon: 'error',\r\n                    button: '확인',\r\n                });\r\n            });\r\n    };\r\n\r\n    if (employee.department !== \"UNDERWRITING\") {\r\n        swal({\r\n            title: '권한 없음',\r\n            text: '언더라이팅팀만 이용 가능한 메뉴입니다.',\r\n            icon: 'error',\r\n            button: '확인',\r\n        });\r\n        return null;\r\n    } else if (products === null) return null;\r\n\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit} className={'underwrite'}>\r\n            <SelectInput text={'상품 이름'} values={products.filter(p => p.released === 0).map(p => p.name)}\r\n                         onChange={(e) => setSelectedProduct(e.target.value)}/>\r\n            <TextInput text={'고령 요율'} value={seniorRate} onChange={(e) => setSeniorRate(e.target.value)}/>\r\n            <TextInput text={'남성 요율'} value={maleRate} onChange={(e) => setMaleRate(e.target.value)}/>\r\n            <TextInput text={'여성 요율'} value={femaleRate} onChange={(e) => setFemaleRate(e.target.value)}/>\r\n            <TextInput text={'위험 직업 요율'} value={occupationalHazardRate}\r\n                       onChange={(e) => setOccupationalHazardRate(e.target.value)}/>\r\n            <TextInput text={'흡연 요율'} value={smokingRate} onChange={(e) => setSmokingRate(e.target.value)}/>\r\n            <Button text={'제출'}/>\r\n        </form>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}