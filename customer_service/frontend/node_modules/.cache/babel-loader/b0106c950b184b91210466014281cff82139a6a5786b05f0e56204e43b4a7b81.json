{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from\"axios\";import'./CreateContract.css';import swal from\"sweetalert\";import SelectInput from\"../../../../common/SelectInput/SelectInput\";import Button from\"../../../../common/Button/Button\";import{ENDPOINT_GET_PRODUCTS,ENDPOINT_POST_CONTRACT}from'../../../../common/Endpoint/Endpoint.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CreateContract(_ref){let{customer}=_ref;const[products,setProducts]=useState(null);const[selectedProduct,setSelectedProduct]=useState(null);useEffect(()=>{axios.get(ENDPOINT_GET_PRODUCTS).then(response=>{setProducts(response.data);setSelectedProduct(response.data[0].name);}).catch(error=>{swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});},[]);function findContractIDByName(name){for(let i=0;i<products.length;i++)if(products[i].name===name)return products[i].id;return undefined;}const handleSubmit=async e=>{e.preventDefault();axios.post(ENDPOINT_POST_CONTRACT,{product_id:findContractIDByName(selectedProduct),customer_id:customer.id}).then(response=>{swal({title:'상품 가입 완료',text:'상품 가입에 성공하였습니다.',icon:'success',button:'확인'});}).catch(error=>{swal({title:'시스템 오류',text:'잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.',icon:'error',button:'확인'});});};if(products==null)return null;return/*#__PURE__*/_jsxs(\"div\",{className:'create_contract',children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uC0C1\\uD488 \\uAC00\\uC785\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form\",children:/*#__PURE__*/_jsx(SelectInput,{text:'상품 이름',values:products.map(function(product){return product.name;}),onChange:e=>setSelectedProduct(e.target.value)})}),/*#__PURE__*/_jsx(Button,{text:'가입',type:\"submit\"})]})]});}","map":{"version":3,"names":["React","useEffect","useState","axios","swal","SelectInput","Button","ENDPOINT_GET_PRODUCTS","ENDPOINT_POST_CONTRACT","jsx","_jsx","jsxs","_jsxs","CreateContract","_ref","customer","products","setProducts","selectedProduct","setSelectedProduct","get","then","response","data","name","catch","error","title","text","icon","button","findContractIDByName","i","length","id","undefined","handleSubmit","e","preventDefault","post","product_id","customer_id","className","children","onSubmit","values","map","product","onChange","target","value","type"],"sources":["C:/Users/junse/Desktop/workspace/GitHub/ds2project/customer_service/frontend/src/user_defined_react_component/specific/Main/MainContents/CreateContract/CreateContract.jsx"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport axios from \"axios\";\r\nimport './CreateContract.css'\r\nimport swal from \"sweetalert\";\r\nimport SelectInput from \"../../../../common/SelectInput/SelectInput\";\r\nimport Button from \"../../../../common/Button/Button\";\r\nimport {ENDPOINT_GET_PRODUCTS, ENDPOINT_POST_CONTRACT} from '../../../../common/Endpoint/Endpoint.js'\r\n\r\nexport default function CreateContract({customer}) {\r\n\r\n    const [products, setProducts] = useState(null);\r\n    const [selectedProduct, setSelectedProduct] = useState(null);\r\n\r\n    useEffect(() => {\r\n        axios.get(ENDPOINT_GET_PRODUCTS)\r\n            .then(response => {\r\n                setProducts(response.data);\r\n                setSelectedProduct(response.data[0].name);\r\n            })\r\n            .catch(error => {\r\n                swal({\r\n                    title: '시스템 오류', text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.', icon: 'error', button: '확인',\r\n                });\r\n            });\r\n    }, []);\r\n\r\n    function findContractIDByName(name) {\r\n        for (let i = 0; i < products.length; i++)\r\n            if (products[i].name === name) return products[i].id;\r\n        return undefined;\r\n    }\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        axios.post(ENDPOINT_POST_CONTRACT, {\r\n            product_id: findContractIDByName(selectedProduct),\r\n            customer_id: customer.id\r\n        })\r\n            .then(response => {\r\n                swal({\r\n                    title: '상품 가입 완료',\r\n                    text: '상품 가입에 성공하였습니다.',\r\n                    icon: 'success',\r\n                    button: '확인',\r\n                });\r\n            })\r\n            .catch(error => {\r\n                swal({\r\n                    title: '시스템 오류', text: '잠시후 다시 시도해주세요. 불편을 드려 죄송합니다.', icon: 'error', button: '확인',\r\n                });\r\n            });\r\n    };\r\n\r\n    if (products == null) return null;\r\n    return (\r\n        <div className={'create_contract'}>\r\n            <h2>상품 가입</h2>\r\n            <form onSubmit={handleSubmit}>\r\n                <div className=\"form\">\r\n                    <SelectInput text={'상품 이름'} values={products.map(function (product) {\r\n                        return product.name;\r\n                    })} onChange={(e) => setSelectedProduct(e.target.value)}/>\r\n                </div>\r\n                <Button text={'가입'} type=\"submit\"/>\r\n            </form>\r\n        </div>\r\n    );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}